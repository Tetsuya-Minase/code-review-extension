<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Code Review AI - 設定</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="options-container">
    <header class="options-header">
      <h1>Code Review AI 設定</h1>
      <p class="options-subtitle">拡張機能の設定を行います</p>
    </header>

    <main class="options-content">
      <!-- AIプロバイダー設定 -->
      <section class="settings-section">
        <h2>AIプロバイダー設定</h2>
        
        <!-- プロバイダー選択 -->
        <div class="form-group">
          <label for="aiProvider">AIプロバイダー</label>
          <select id="aiProvider" class="form-select">
            <option value="openai">OpenAI (GPT-4o, O1)</option>
            <option value="claude">Claude (Sonnet 4, 3.7)</option>
            <option value="gemini">Google Gemini (2.5, 2.0)</option>
            <option value="openai-compatible">OpenAI Compatible</option>
          </select>
          <p class="form-help">使用するAIプロバイダーを選択してください</p>
        </div>

        <!-- OpenAI設定 -->
        <div id="openai-config" class="provider-config">
          <div class="form-group">
            <label for="openai-apiKey">OpenAI APIキー</label>
            <input 
              type="password" 
              id="openai-apiKey" 
              class="form-input" 
              placeholder="sk-..."
            />
            <p class="form-help">
              <a href="https://platform.openai.com/api-keys" target="_blank" rel="noopener">APIキーの取得はこちら</a>
            </p>
          </div>
          <div class="form-group">
            <label for="openai-model">モデル</label>
            <select id="openai-model" class="form-select">
              <option value="gpt-4o">GPT-4o</option>
              <option value="o1">O1</option>
              <option value="o1-mini">O1 Mini</option>
              <option value="gpt-4o-mini">GPT-4o Mini</option>
            </select>
          </div>
        </div>

        <!-- Claude設定 -->
        <div id="claude-config" class="provider-config" style="display: none;">
          <div class="form-group">
            <label for="claude-apiKey">Claude APIキー</label>
            <input 
              type="password" 
              id="claude-apiKey" 
              class="form-input" 
              placeholder="sk-ant-..."
            />
            <p class="form-help">
              <a href="https://console.anthropic.com/" target="_blank" rel="noopener">APIキーの取得はこちら</a>
            </p>
          </div>
          <div class="form-group">
            <label for="claude-model">モデル</label>
            <select id="claude-model" class="form-select">
              <option value="claude-sonnet-4-20250514">Claude 4 (Sonnet 4)</option>
              <option value="claude-opus-4-20250514">Claude 4 (Ops 4)</option>
              <option value="claude-3-7-sonnet-20250219">Claude 3.7 Sonnet</option>
            </select>
          </div>
        </div>

        <!-- Gemini設定 -->
        <div id="gemini-config" class="provider-config" style="display: none;">
          <div class="form-group">
            <label for="gemini-apiKey">Gemini APIキー</label>
            <input 
              type="password" 
              id="gemini-apiKey" 
              class="form-input" 
              placeholder="AIza..."
            />
            <p class="form-help">
              <a href="https://makersuite.google.com/app/apikey" target="_blank" rel="noopener">APIキーの取得はこちら</a>
            </p>
          </div>
          <div class="form-group">
            <label for="gemini-model">モデル</label>
            <select id="gemini-model" class="form-select">
              <option value="gemini-2.5-flash">Gemini 2.5 Flash</option>
              <option value="gemini-2.0-flash-exp">Gemini 2.0 Flash (Experimental)</option>
              <option value="gemini-1.5-pro">Gemini 1.5 Pro</option>
              <option value="gemini-1.5-flash">Gemini 1.5 Flash</option>
            </select>
          </div>
        </div>

        <!-- OpenAI Compatible設定 -->
        <div id="openai-compatible-config" class="provider-config" style="display: none;">
          <div class="form-group">
            <label for="compatible-baseUrl">ベースURL</label>
            <input 
              type="url" 
              id="compatible-baseUrl" 
              class="form-input" 
              placeholder="https://api.example.com/v1"
            />
            <p class="form-help">OpenAI互換APIのベースURLを入力してください</p>
          </div>
          <div class="form-group">
            <label for="compatible-apiKey">APIキー</label>
            <input 
              type="password" 
              id="compatible-apiKey" 
              class="form-input" 
              placeholder="your-api-key"
            />
          </div>
          <div class="form-group">
            <label for="compatible-model">モデル名</label>
            <input 
              type="text" 
              id="compatible-model" 
              class="form-input" 
              placeholder="model-name"
            />
            <p class="form-help">使用するモデル名を入力してください</p>
          </div>
        </div>
      </section>

      <!-- レビューステップ設定 -->
      <section class="settings-section">
        <div class="steps-header">
          <h2>レビューステップ設定</h2>
          <button id="addStepButton" class="button button-secondary">ステップを追加</button>
        </div>
        
        <div id="stepsContainer" class="steps-container">
          <!-- ステップが動的に追加されます -->
        </div>
      </section>

      <!-- 保存ボタン -->
      <div class="actions">
        <button id="saveButton" class="button button-primary">設定を保存</button>
        <button id="resetButton" class="button button-secondary">デフォルトに戻す</button>
      </div>

      <!-- ステータスメッセージ -->
      <div id="statusMessage" class="status-message"></div>
    </main>

    <footer class="options-footer">
      <p>Code Review AI v1.0.0</p>
    </footer>
  </div>

  <script type="module" src="options.js"></script>
</body>
</html>
